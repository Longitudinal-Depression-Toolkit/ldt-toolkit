{
  "build_trajectories": {
    "title": "Build Trajectories",
    "parameter_templates": {
      "from_scratch_parameters": [
        {
          "key": "input_path",
          "label": "Input CSV path",
          "type": "path",
          "required": true,
          "hint": "Long-format longitudinal dataset."
        },
        {
          "key": "output_path",
          "label": "Output trajectories CSV path",
          "type": "path",
          "required": true,
          "default": "build_trajectories_output.csv"
        },
        {
          "key": "id_col",
          "label": "Subject ID column",
          "type": "string",
          "required": true,
          "default": "subject_id"
        },
        {
          "key": "time_col",
          "label": "Time column",
          "type": "string",
          "required": true,
          "default": "wave"
        },
        {
          "key": "value_cols",
          "label": "Value columns",
          "type": "string_list",
          "required": true,
          "default": [
            "depressive_score"
          ],
          "hint": "Comma-separated numeric longitudinal outcome columns."
        },
        {
          "key": "class_col",
          "label": "Class column (optional)",
          "type": "string",
          "required": false,
          "default": ""
        },
        {
          "key": "n_trajectories",
          "label": "Number of trajectories",
          "type": "int",
          "required": true,
          "default": 3,
          "min": 1,
          "hint": "How many trajectory groups should be inferred."
        },
        {
          "key": "builder_kwargs_json",
          "label": "Builder kwargs (JSON object)",
          "type": "json",
          "required": false,
          "default": "{}",
          "hint": "Optional model hyperparameters as JSON object."
        },
        {
          "key": "save_model_path",
          "label": "Save fitted model path (optional)",
          "type": "path",
          "required": false,
          "default": ""
        }
      ],
      "from_saved_model_parameters": [
        {
          "key": "input_model_path",
          "label": "Saved model path (.pkl)",
          "type": "path",
          "required": true
        },
        {
          "key": "input_path",
          "label": "Input CSV path",
          "type": "path",
          "required": true,
          "hint": "Long-format longitudinal dataset."
        },
        {
          "key": "output_path",
          "label": "Output trajectories CSV path",
          "type": "path",
          "required": true,
          "default": "loaded_model_trajectories.csv"
        },
        {
          "key": "id_col",
          "label": "Subject ID column",
          "type": "string",
          "required": true,
          "default": "subject_id"
        },
        {
          "key": "time_col",
          "label": "Time column",
          "type": "string",
          "required": true,
          "default": "wave"
        },
        {
          "key": "value_cols",
          "label": "Value columns",
          "type": "string_list",
          "required": true,
          "default": [
            "depressive_score"
          ]
        },
        {
          "key": "class_col",
          "label": "Class column (optional)",
          "type": "string",
          "required": false,
          "default": ""
        }
      ]
    },
    "techniques": [
      {
        "id": "lcga",
        "name": "LCGA",
        "description": "Latent Class Growth Analysis using R lcmm.",
        "parameters": "@from_scratch_parameters"
      },
      {
        "id": "gmm",
        "name": "GMM",
        "description": "Growth Mixture Model using R lcmm.",
        "parameters": "@from_scratch_parameters"
      },
      {
        "id": "dtw_kmeans",
        "name": "DTW k-means",
        "description": "Dynamic Time Warping k-means clustering for trajectory shapes.",
        "parameters": "@from_scratch_parameters"
      },
      {
        "id": "clustermld",
        "name": "ClusterMLD",
        "description": "Spline hierarchical clustering via clusterMLD.",
        "parameters": "@from_scratch_parameters"
      },
      {
        "id": "from_saved_model",
        "name": "From saved model",
        "description": "Apply a saved trajectory model to a new dataset (Load a saved trajectory model).",
        "parameters": "@from_saved_model_parameters"
      }
    ]
  },
  "combine_dataset_with_trajectories": {
    "title": "Combine Dataset with Trajectories",
    "techniques": [
      {
        "id": "combine_dataset",
        "name": "Combine dataset",
        "description": "Merge source data with trajectory assignments.",
        "parameters": [
          {
            "key": "input_original_data_path",
            "label": "Original dataset CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "input_trajectories_data_path",
            "label": "Trajectories dataset CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_path",
            "label": "Output combined CSV path",
            "type": "path",
            "required": true,
            "default": "dataset_with_trajectories.csv"
          },
          {
            "key": "original_id_col",
            "label": "ID column in original data",
            "type": "string",
            "required": true,
            "default": "subject_id"
          },
          {
            "key": "trajectory_id_col",
            "label": "ID column in trajectories data",
            "type": "string",
            "required": true,
            "default": "subject_id"
          },
          {
            "key": "trajectory_columns",
            "label": "Trajectory columns to merge",
            "type": "string_list",
            "required": false,
            "default": [],
            "hint": "Leave empty to auto-select all trajectory columns except ID."
          },
          {
            "key": "drop_columns",
            "label": "Columns to drop after merge",
            "type": "string_list",
            "required": false,
            "default": []
          },
          {
            "key": "merge_type",
            "label": "Merge type",
            "type": "enum",
            "required": true,
            "default": "left",
            "options": [
              {
                "label": "left",
                "value": "left"
              },
              {
                "label": "inner",
                "value": "inner"
              }
            ]
          }
        ]
      }
    ]
  },
  "clean_dataset": {
    "title": "Clean Dataset",
    "techniques": [
      {
        "id": "clean_dataset",
        "name": "Clean dataset",
        "description": "Clean a dataset with skrub Cleaner.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Input CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_path",
            "label": "Output cleaned CSV path",
            "type": "path",
            "required": true,
            "default": "cleaned_dataset.csv"
          },
          {
            "key": "drop_null_fraction",
            "label": "Drop-null fraction threshold",
            "type": "float",
            "required": false,
            "default": 1.0,
            "min": 0.0,
            "max": 1.0
          },
          {
            "key": "drop_if_constant",
            "label": "Drop constant columns",
            "type": "bool",
            "required": true,
            "default": false
          },
          {
            "key": "drop_if_unique",
            "label": "Drop unique non-numeric columns",
            "type": "bool",
            "required": true,
            "default": false
          },
          {
            "key": "datetime_format",
            "label": "Datetime format (optional)",
            "type": "string",
            "required": false,
            "default": ""
          },
          {
            "key": "cast_to_str",
            "label": "Cast non-numeric columns to strings",
            "type": "bool",
            "required": true,
            "default": false
          },
          {
            "key": "numeric_to_float32",
            "label": "Convert numeric columns to float32",
            "type": "bool",
            "required": true,
            "default": false
          }
        ]
      }
    ]
  },
  "missing_imputation": {
    "title": "Missing Imputation",
    "techniques": [
      {
        "id": "simple_imputation",
        "name": "Simple imputation",
        "description": "Impute with scikit-learn SimpleImputer.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Input CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_path",
            "label": "Output imputed CSV path",
            "type": "path",
            "required": true,
            "default": "imputed_dataset.csv"
          },
          {
            "key": "numeric_strategy",
            "label": "Numeric strategy",
            "type": "enum",
            "required": true,
            "default": "median",
            "options": [
              {
                "label": "mean",
                "value": "mean"
              },
              {
                "label": "median",
                "value": "median"
              },
              {
                "label": "most_frequent",
                "value": "most_frequent"
              },
              {
                "label": "constant",
                "value": "constant"
              },
              {
                "label": "none",
                "value": "none"
              }
            ]
          },
          {
            "key": "categorical_strategy",
            "label": "Categorical strategy",
            "type": "enum",
            "required": true,
            "default": "most_frequent",
            "options": [
              {
                "label": "most_frequent",
                "value": "most_frequent"
              },
              {
                "label": "constant",
                "value": "constant"
              },
              {
                "label": "none",
                "value": "none"
              }
            ]
          },
          {
            "key": "numeric_fill_value",
            "label": "Numeric constant fill value",
            "type": "float",
            "required": false,
            "default": 0.0,
            "when": {
              "field": "numeric_strategy",
              "equals": "constant"
            }
          },
          {
            "key": "categorical_fill_value",
            "label": "Categorical constant fill value",
            "type": "string",
            "required": false,
            "default": "missing",
            "when": {
              "field": "categorical_strategy",
              "equals": "constant"
            }
          }
        ]
      },
      {
        "id": "mice_imputation",
        "name": "MICE imputation",
        "description": "Impute with miceforest MICE.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Input CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_path",
            "label": "Output imputed CSV path",
            "type": "path",
            "required": true,
            "default": "imputed_dataset.csv"
          },
          {
            "key": "iterations",
            "label": "MICE iterations",
            "type": "int",
            "required": true,
            "default": 5,
            "min": 1
          },
          {
            "key": "num_datasets",
            "label": "Number of imputed datasets",
            "type": "int",
            "required": true,
            "default": 1,
            "min": 1
          },
          {
            "key": "dataset_index",
            "label": "Dataset index to export",
            "type": "int",
            "required": true,
            "default": 0,
            "min": 0
          },
          {
            "key": "mean_match_candidates",
            "label": "Mean match candidates",
            "type": "int",
            "required": true,
            "default": 5,
            "min": 0
          },
          {
            "key": "random_state",
            "label": "Random state (optional)",
            "type": "int",
            "required": false,
            "default": 42
          },
          {
            "key": "cast_object_to_category",
            "label": "Cast object columns to category",
            "type": "bool",
            "required": true,
            "default": true
          }
        ]
      }
    ]
  },
  "harmonise_categories": {
    "title": "Harmonise Categories",
    "techniques": [
      {
        "id": "harmonise_categories",
        "name": "Harmonise categories",
        "description": "Deduplicate noisy categorical labels.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Input CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_path",
            "label": "Output harmonised CSV path",
            "type": "path",
            "required": true,
            "default": "harmonised_dataset.csv"
          },
          {
            "key": "target_columns",
            "label": "Categorical columns to harmonise",
            "type": "string_list",
            "required": true
          },
          {
            "key": "n_clusters",
            "label": "Number of clusters (optional)",
            "type": "int",
            "required": false,
            "min": 2
          },
          {
            "key": "save_mapping",
            "label": "Save mapping CSV",
            "type": "bool",
            "required": true,
            "default": true
          },
          {
            "key": "mapping_path",
            "label": "Mapping CSV output path",
            "type": "path",
            "required": false,
            "default": "harmonisation_mapping.csv",
            "when": {
              "field": "save_mapping",
              "equals": true
            }
          }
        ]
      }
    ]
  },
  "show_table": {
    "title": "Show Table",
    "techniques": [
      {
        "id": "show_table",
        "name": "Show table report",
        "description": "Generate an HTML skrub TableReport.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Input CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_html",
            "label": "Output HTML path",
            "type": "path",
            "required": true,
            "default": "skrub_table_report.html"
          },
          {
            "key": "open_browser",
            "label": "Open browser after generation",
            "type": "bool",
            "required": true,
            "default": false
          }
        ]
      }
    ]
  },
  "aggregate_long_to_cross_sectional": {
    "title": "Aggregate Long to Cross Sectional",
    "techniques": [
      {
        "id": "aggregate_long_to_cross_sectional",
        "name": "Aggregate long to cross sectional",
        "description": "Collapse repeated rows into one row per subject.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Input long-format CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_path",
            "label": "Output aggregated CSV path",
            "type": "path",
            "required": true,
            "default": "cross_sectional_dataset.csv"
          },
          {
            "key": "subject_id_col",
            "label": "Subject ID column",
            "type": "string",
            "required": true,
            "default": "subject_id"
          },
          {
            "key": "numeric_columns",
            "label": "Numeric columns",
            "type": "string_list",
            "required": false,
            "default": [],
            "hint": "Leave empty to auto-select numeric columns."
          },
          {
            "key": "categorical_columns",
            "label": "Categorical columns",
            "type": "string_list",
            "required": false,
            "default": [],
            "hint": "Leave empty to skip categorical aggregation."
          },
          {
            "key": "numeric_agg",
            "label": "Numeric aggregation",
            "type": "enum",
            "required": true,
            "default": "mean",
            "options": [
              {
                "label": "mean",
                "value": "mean"
              },
              {
                "label": "median",
                "value": "median"
              },
              {
                "label": "min",
                "value": "min"
              },
              {
                "label": "max",
                "value": "max"
              },
              {
                "label": "std",
                "value": "std"
              }
            ]
          },
          {
            "key": "categorical_agg",
            "label": "Categorical aggregation",
            "type": "enum",
            "required": true,
            "default": "mode",
            "options": [
              {
                "label": "mode",
                "value": "mode"
              },
              {
                "label": "first",
                "value": "first"
              },
              {
                "label": "last",
                "value": "last"
              }
            ]
          }
        ]
      }
    ]
  },
  "remove_columns": {
    "title": "Remove Columns",
    "techniques": [
      {
        "id": "remove_columns",
        "name": "Drop selected columns",
        "description": "Drop selected columns from a CSV and write a new CSV output.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Input CSV path",
            "type": "path",
            "required": true,
            "hint": "Select the CSV to modify."
          },
          {
            "key": "output_path",
            "label": "Output CSV path",
            "type": "path",
            "required": false,
            "hint": "Leave empty to auto-generate next to input file."
          },
          {
            "key": "columns",
            "label": "Columns to remove",
            "type": "string_list",
            "required": true,
            "hint": "Comma-separated list of existing column names."
          }
        ]
      }
    ]
  },
  "rename_feature": {
    "title": "Rename Feature",
    "techniques": [
      {
        "id": "rename_feature",
        "name": "Rename feature",
        "description": "Rename one feature in a CSV dataset.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Input CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_path",
            "label": "Output CSV path",
            "type": "path",
            "required": true,
            "default": "feature_renamed_dataset.csv"
          },
          {
            "key": "feature_name",
            "label": "Feature name to rename",
            "type": "string",
            "required": true
          },
          {
            "key": "new_feature_name",
            "label": "New feature name",
            "type": "string",
            "required": true
          }
        ]
      }
    ]
  },
  "pivot_long_to_wide": {
    "title": "Pivot Long to Wide",
    "techniques": [
      {
        "id": "pivot_long_to_wide",
        "name": "Pivot long to wide",
        "description": "Pivot long-format longitudinal rows into wide format.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Input long-format CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_path",
            "label": "Output wide-format CSV path",
            "type": "path",
            "required": true,
            "default": "wide_format_dataset.csv"
          },
          {
            "key": "id_cols",
            "label": "ID columns",
            "type": "string_list",
            "required": true,
            "default": [
              "subject_id"
            ]
          },
          {
            "key": "time_col",
            "label": "Time column",
            "type": "string",
            "required": true,
            "default": "wave"
          },
          {
            "key": "longitudinal_columns",
            "label": "Longitudinal columns",
            "type": "string_list",
            "required": false,
            "default": [],
            "hint": "Leave empty for auto-selection."
          },
          {
            "key": "non_longitudinal_columns",
            "label": "Non-longitudinal columns",
            "type": "string_list",
            "required": false,
            "default": [],
            "hint": "Leave empty for auto-selection."
          },
          {
            "key": "time_label",
            "label": "Time label token",
            "type": "string",
            "required": true,
            "default": "t"
          },
          {
            "key": "separator",
            "label": "Separator",
            "type": "enum",
            "required": true,
            "default": "_",
            "options": [
              {
                "label": "_",
                "value": "_"
              },
              {
                "label": "-",
                "value": "-"
              }
            ]
          }
        ]
      }
    ]
  },
  "trajectories_viz": {
    "title": "Trajectories Viz",
    "techniques": [
      {
        "id": "mean_profiles",
        "name": "Mean profiles",
        "description": "Average trajectory curves with optional uncertainty bands.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Combined dataset CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_html",
            "label": "Output HTML path",
            "type": "path",
            "required": true,
            "default": "mean_profiles_trajectories_viz.html"
          },
          {
            "key": "open_browser",
            "label": "Open browser after generation",
            "type": "bool",
            "required": true,
            "default": false
          },
          {
            "key": "title",
            "label": "Figure title",
            "type": "string",
            "required": true,
            "default": "Mean Profiles"
          },
          {
            "key": "id_col",
            "label": "Subject ID column",
            "type": "string",
            "required": true,
            "default": "subject_id"
          },
          {
            "key": "time_col",
            "label": "Time column",
            "type": "string",
            "required": true,
            "default": "wave"
          },
          {
            "key": "value_col",
            "label": "Value column",
            "type": "string",
            "required": true,
            "default": "depressive_score"
          },
          {
            "key": "trajectory_col",
            "label": "Trajectory ID column",
            "type": "string",
            "required": true,
            "default": "trajectory_id"
          },
          {
            "key": "trajectory_name_col",
            "label": "Trajectory name column",
            "type": "string",
            "required": true,
            "default": "trajectory_name"
          },
          {
            "key": "show_error_band",
            "label": "Show uncertainty band",
            "type": "bool",
            "required": true,
            "default": true
          },
          {
            "key": "band_metric",
            "label": "Band metric",
            "type": "enum",
            "required": true,
            "default": "sem",
            "options": [
              {
                "label": "sem",
                "value": "sem"
              },
              {
                "label": "std",
                "value": "std"
              }
            ]
          },
          {
            "key": "sample_per_trajectory",
            "label": "Sample trajectories per class",
            "type": "int",
            "required": true,
            "default": 0,
            "min": 0
          },
          {
            "key": "random_state",
            "label": "Random state",
            "type": "int",
            "required": true,
            "default": 42
          }
        ]
      },
      {
        "id": "class_spaghetti",
        "name": "Class spaghetti",
        "description": "Overlay individual trajectories by class.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Combined dataset CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_html",
            "label": "Output HTML path",
            "type": "path",
            "required": true,
            "default": "class_spaghetti_trajectories_viz.html"
          },
          {
            "key": "open_browser",
            "label": "Open browser after generation",
            "type": "bool",
            "required": true,
            "default": false
          },
          {
            "key": "title",
            "label": "Figure title",
            "type": "string",
            "required": true,
            "default": "Class Spaghetti"
          },
          {
            "key": "id_col",
            "label": "Subject ID column",
            "type": "string",
            "required": true,
            "default": "subject_id"
          },
          {
            "key": "time_col",
            "label": "Time column",
            "type": "string",
            "required": true,
            "default": "wave"
          },
          {
            "key": "value_col",
            "label": "Value column",
            "type": "string",
            "required": true,
            "default": "depressive_score"
          },
          {
            "key": "trajectory_col",
            "label": "Trajectory ID column",
            "type": "string",
            "required": true,
            "default": "trajectory_id"
          },
          {
            "key": "trajectory_name_col",
            "label": "Trajectory name column",
            "type": "string",
            "required": true,
            "default": "trajectory_name"
          },
          {
            "key": "sample_per_trajectory",
            "label": "Sample trajectories per class",
            "type": "int",
            "required": true,
            "default": 100,
            "min": 0
          },
          {
            "key": "show_mean_profile",
            "label": "Show class mean profile",
            "type": "bool",
            "required": true,
            "default": true
          },
          {
            "key": "random_state",
            "label": "Random state",
            "type": "int",
            "required": true,
            "default": 42
          }
        ]
      },
      {
        "id": "trajectory_sizes",
        "name": "Trajectory sizes",
        "description": "Bar chart of subject counts per trajectory.",
        "parameters": [
          {
            "key": "input_path",
            "label": "Combined dataset CSV path",
            "type": "path",
            "required": true
          },
          {
            "key": "output_html",
            "label": "Output HTML path",
            "type": "path",
            "required": true,
            "default": "trajectory_sizes_trajectories_viz.html"
          },
          {
            "key": "open_browser",
            "label": "Open browser after generation",
            "type": "bool",
            "required": true,
            "default": false
          },
          {
            "key": "title",
            "label": "Figure title",
            "type": "string",
            "required": true,
            "default": "Trajectory Sizes"
          },
          {
            "key": "id_col",
            "label": "Subject ID column",
            "type": "string",
            "required": true,
            "default": "subject_id"
          },
          {
            "key": "trajectory_col",
            "label": "Trajectory ID column",
            "type": "string",
            "required": true,
            "default": "trajectory_id"
          },
          {
            "key": "trajectory_name_col",
            "label": "Trajectory name column",
            "type": "string",
            "required": true,
            "default": "trajectory_name"
          }
        ]
      }
    ]
  }
}
